<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>库位管理</title>
		<link rel="stylesheet" type="text/css" href="../easyui/themes/default/easyui.css">
		<link rel="stylesheet" type="text/css" href="../easyui/themes/icon.css">
		<link rel="stylesheet" type="text/css" href="../easyui/demo/demo.css">
		<script type="text/javascript" src="../easyui/jquery.min.js"></script>
		<script type="text/javascript" src="../easyui/jquery.easyui.min.js"></script>
		<link rel="stylesheet" href="../layui/css/layui.css" media="all">
		<script src="../layui/layui.js" charset="utf-8"></script>
		<link rel="stylesheet" href="css/style.css" media="all">

	</head>

	<body style="background-color: whitesmoke;">

		<div class="layui-fluid">
			<div class="layui-col-md12" style="height: 10px;">
			</div>
			<div class="layui-col-md12" style="background-color: #4e4e70;height: 20px;">
				<font color="white">库位管理</font>
			</div>

			<div class="layui-col-md12" style="height: 650px;">
				<!--按钮开始 -->
				<div class="layui-col-md12" style="padding-bottom: 4px;background-color: white;">
					<form class="layui-form" action="">
						<div class="layui-form" style="margin: 5px 0px 0px 10px;">
							<button class="layui-btn layui-btn-sm btn">增加库位</button>
							<button class="layui-btn layui-btn-sm btn">删除库位</button>
							<button class="layui-btn layui-btn-sm btn">保存</button>
						</div>
					</form>
				</div>
				<!--按钮结束 -->

				<div class="layui-col-md12" style="background-color: #4e4e70;height: 20px;">
					<font color="white">库位主文件</font>
				</div>
				<!--库位主文件开始-->
				<div class="layui-col-md12" style="padding-bottom: 4px;background-color: white;">
					<div class="layui-col-md12" style="height: 454px;">
						<table id="l_dg" name="l_dg" class="easyui-datagrid" data-options="rownumbers:true,
		    toolbar: '#sb',
		    onClickRow: Serch_Ord,
		    singleSelect:true,
			autoRowHeight:false,
			pagination:true,
			pageSize:10" style="width: 100%;height: 100%;">
							<thead>
								<tr>
									<th data-options="field:'CUST_ID'" align="center" style="width: 65px;height: 25px;">
										<font style="font-size: 12px;">
											<font color="red">*</font>库编码</font>
									</th>
									<th data-options="field:'CUST_NAME'" align="center" style="width: 60px;height: 25px;">
										<font style="font-size: 12px;">
											<font color="red">*</font>位编码</font>
									</th>
									<th data-options="field:'CUST_ID'" align="center" style="width: 65px;height: 25px;">
										<font style="font-size: 12px;">库位描述</font>
									</th>
									<th data-options="field:'CUST_NAME'" align="center" style="width: 60px;height: 25px;">
										<font style="font-size: 12px;">编辑人</font>
									</th>

								</tr>
							</thead>
						</table>
					</div>
				</div>
				<!--库位主文件结束-->
			</div>

		</div>

		<!--时间js开始-->
		<script>
			layui.use('laydate', function() {
				var laydate = layui.laydate;

				//执行一个laydate实例
				laydate.render({
					elem: '#test1' //指定元素
				});
			});
		</script>
		<script>
			layui.use('laydate', function() {
				var laydate = layui.laydate;

				//执行一个laydate实例
				laydate.render({
					elem: '#test2' //指定元素
				});
			});
		</script>

		<!--表单js-->
		<script type="text/javascript">
			var editIndex = undefined;
			var editorid = 0;

			function Serch_Ord(rowIndex, rowData) { //查询菜单单据查询刷新模块
				var Tab_Name = "CUSTOM";
				var customd = rowData['CUST_ID'];
				var Titles = " where CUST_ID like '" + customd + "%'";

				if(customd) {
					//================================================产品主要信息查询========
					$.post("../php/Form_query.php", {
							'Tab_name': Tab_Name,
							'cont': Titles
						},
						function(data) {
							$('#cust_info').form('load', data);
						}, "json");
				}
			}

			function Serch_left() {
				var Tab_name = "CUSTOMD";
				var cust_id = $("#CUSTID").val();
				var Titles = " where CUST_ID like '" + cust_id + "%'";
				$.post("../php/Tab_query.php", {
						'Tab_Name': Tab_name,
						'Cont': Titles
					},
					function(data1) {
						$("#l_dg").datagrid({
							data: data1
						});
					},
					"json");
			}

			function Save_info() {
				var Tab_Name = "CUSTOM";
				var customd = $("#CUST_ID").val();
				var Titles = " where CUST_ID like '" + customd + "%'";
				var values = $("#cust_info").serializeArray();
				var ii = values.length;

				Delete_Inf();
				$.post('../php/Form_save.php', {
						'atr': values,
						'Tab_name': Tab_Name,
						'len': ii
					},
					function(data) {
						$('#msg').html(data);
					}, "json");

			}

			function Clear_info() { //清除所有窗体
				$("#cust_info").form('clear');
				//		$('#dg').datagrid('loadData', { total: 0, rows: [] });
				//		$('#dg1').datagrid('loadData', { total: 0, rows: [] });
			}

			function Dele_info() {
				Delete_Inf();
				Clear_info();
				Serch_left();

			}

			function Delete_Inf() {
				var Tab_Name = "CUSTOM";
				var customd = $("#CUST_ID").val();
				var Cont = " where CUST_ID like '" + customd + "%'";
				if(customd == "") {
					return;
				}
				$.post('../php/Form_dele.php', {
						'Tab_Name': Tab_Name,
						'Cont': Cont
					},
					function(data) {
						$('#msg').html(data);
					}, "json");
			}
		</script>
	</body>

</html>